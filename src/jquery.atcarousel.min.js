!function($){$.fn.ATCarousel=function(){function n(n){h={width:p.outerWidth(!0),height:p.outerHeight(!0),circle:!0,buttons:!1,transition:"slideX",speed:500,easing:"swing",autoPlay:!0,hoverStop:!0,step:1,interval:3e3,beforeChange:!1,afterChange:!1},$.extend(h,n[0]),v=p.find("> *").length;var s=p.html();if(p.html(""),p.append('<div class="ATContainer"></div>'),T=p.find(".ATContainer"),T.append(s),w=T.find("> *"),w.addClass("ATitem").css({display:"none"}),w.eq(0).show(0),!T.find(".current").length)for(var r=0;r<h.step;r++)w.eq(r).addClass("current");T.find(".current").each(function(n){$(this).css({"margin-left":h.width*n})}),h.autoPlay&&(i(),h.hoverStop&&(p.on("mouseenter",function(){a()}),p.on("mouseleave",function(){i()}))),t(),e()}function e(){$(window).resize(function(){h.width=p.outerWidth(!0),console.log(h.width)})}function t(){function n(n){switch(n){case"transparent":p.append('<a class="ATprevTrans ATprev" href="#"></a><a class="ATnextTrans ATnext" href="#"></a>'),p.find(".ATprevTrans").on("click",function(n){n.preventDefault(),d()}),p.find(".ATnextTrans").on("click",function(n){n.preventDefault(),o()});break;case"arrows":p.find(".ATprevArrow, .ATnextArrow").length||p.append('<a class="ATprevArrow ATprev" href="#"><</a><a class="ATnextArrow ATnext" href="#">></a>'),p.find(".ATprevArrow").on("click",function(n){n.preventDefault(),d()}),p.find(".ATnextArrow").on("click",function(n){n.preventDefault(),o()});break;case"dots":p.append('<div class="ATdots"><div class="ATContainer"></div></div>'),C=p.find(".ATdots .ATContainer");for(var e=0;v>e;e++)C.append('<a href="#" data-slide="'+e+'"></a>');p.find(".ATdots a:first-child").addClass("current"),C.find("a").on("click",function(n){n.preventDefault(),l($(this).data("slide"))})}}if(h.buttons){if("string"==typeof h.buttons&&n(h.buttons),"object"==typeof h.buttons)for(var e in h.buttons)n(h.buttons[e]);h.circle||p.find(".ATprev").fadeOut(0)}}function i(){var n=r().data("interval")?parseInt(r().data("interval")):h.interval;m=setTimeout(function(){o(),i()},n)}function a(){clearInterval(m)}function s(){return arguments.length?w.eq((arguments[0]-h.step+v)%v):w.eq((A-h.step+v)%v)}function r(){return arguments.length?w.eq((arguments[0]+h.step+v)%v):w.eq((A+h.step+v)%v)}function o(){l((A+h.step)%v)}function d(){l((A-h.step+v)%v)}function f(){h.beforeChange&&h.beforeChange()}function c(){h.afterChange&&h.afterChange()}function u(n){var e,t,i,a,s,r,o,d;for(a=T.find(".current"),i=a.index()<n?1:-1,r=w.eq(n),e=0;e<h.step;e++)w.eq((n+e)%v).addClass("next");if(r.show(0),s=T.find(".next"),o=w.eq(n).data("transition")?r.data("transition"):h.transition,d=w.eq(n).data("speed")?parseInt(r.data("speed")):h.speed,a.endTransition=function(){$(this).each(function(n){$(this).removeClass("current")})},s.endTransition=function(){$(this).each(function(n){$(this).removeClass("next").addClass("current")})},"string"==typeof o)switch(o){case"slideX":a.each(function(n){$(this).animate({"margin-left":i*(-$(this).outerWidth(!0)*(h.step-n))+"px"},d,h.easing,function(){a.endTransition()})}),s.each(function(n){$(this).css({"margin-left":i*(h.width*(n+h.step))}),$(this).animate({"margin-left":i*(h.width*n)+"px"},d,h.easing,function(){c($(this)),s.endTransition()})});break;case"xFade":a.fadeOut(500,function(){a.endTransition()}),s.style("display","none").fadeIn(500,function(){s.endTransition()})}else"function"==typeof o&&o(a,s,{direction:i,speed:d});A=n}function l(n){if(!w.is(":animated")){var e=A;if(h.circle){var t=(v+n-A)%v,i=(n-A-v)%v,a=Math.abs(t)<=Math.abs(i)?t:i;A=(v+n)%v}else A=Math.max(0,Math.min(n,v-1)),0>=g&&p.find(".ATprev").fadeIn(),g>=-v&&p.find(".ATprev").fadeOut(),g<=T.width()-h.width*v&&p.find(".ATnext").fadeOut(),g>T.width()-h.width*v&&p.find(".ATnext").fadeIn();f(),p.find(".ATdots a").removeClass("current"),p.find(".ATdots a").eq((A+v)%v).addClass("current"),u(n)}}var h,p=$(this),v=p.find("> *").length,T,A=0,g=0,m,w,C=!1;return p.addClass("ATCarousel"),n(arguments),{config:h,go:l,next:o,prev:d,play:i,stop:a,items:w}}}(jQuery);